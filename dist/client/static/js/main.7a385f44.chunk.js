(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{27:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(21),c=n.n(l),u=n(9),i=n(8),o=[{title:"Kalenteri",url:"/"},{title:"Sarjataulukko",url:"/standings"},{title:"SNW",url:"/snw"}],s=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e.title},r.a.createElement(u.c,{to:e.url},e.title))}))))},m=n(7),d=n.n(m),p=n(2),f=n(11),v=n(5),E="/api",h=function(e){return"/races/".concat(e)},k=function(e){var t=e.title,n=e.children;return r.a.createElement("div",null,r.a.createElement("h1",null,t),n)},b=function(e){var t=e.data,n=e.headers,a=e.headerMap;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,n.map((function(e){return r.a.createElement("th",{key:e},a[e])})))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},n.map((function(t){return r.a.createElement("td",{key:t},e[t])})))}))))},j=function(){return r.a.createElement("div",null,"Loading...")},N=n(25),g=n(26);n(15);var y=function(e){return e.split(/[:,]/).map((function(e,t){return 0===t?60*Number(e):1===t?Number(e):Number(e)/1e3})).reduce((function(e,t){return e+t}))},O=function(e){return{type:"SET_CALENDAR",payload:function(e){var t=e.reduce((function(e,t){var n=t.seasonId,a=t.seasonName,r=Object(g.a)(t,["seasonId","seasonName"]);return e[t.seasonId]?e[n].events.push(r):e[n]={seasonId:n,seasonName:a,events:[r]},e}),{});return Object.keys(t).map((function(e){return Object(p.a)({},t[e])}))}(e)}},L=function(e){return{type:"SET_RACES",payload:e}},S=function(e){return{type:"SET_STANDINGS",payload:e}},x={calendar:[],races:[],standings:[]},P=r.a.createContext([x,function(){return x}]),I=function(e){var t=e.reducer,n=e.children,a=r.a.useReducer(t,x),l=Object(v.a)(a,2),c=l[0],u=l[1];return r.a.createElement(P.Provider,{value:[c,u]},n)},w=function(){return r.a.useContext(P)},T={date:"Date",trackName:"Track",qLaps:"Q Laps",raceLaps:"Race Laps",link:"Results"},q=["date","trackName","qLaps","raceLaps","link"],A=function(){var e=w(),t=Object(v.a)(e,1)[0].calendar;return 0===t.length?r.a.createElement(j,null):r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("div",{key:e.seasonId},r.a.createElement("h2",null,e.seasonName),r.a.createElement(b,{data:e.events,headers:q,headerMap:T}))})))},R=E+"/races",D=function(){var e=w(),t=Object(v.a)(e,2),n=t[0].calendar,a=t[1],l=0===n.length;return r.a.useEffect((function(){l&&function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(R);case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,l=n.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{link:r.a.createElement(u.b,{to:h(e.eventId)},"Link")})})),a(O(l)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[a,l]),r.a.createElement(k,{title:"Kisakalenteri"},r.a.createElement(A,null))},M=n(24),C=["driverName","racesDriven","points","powerLimit"],K={driverName:"Driver",racesDriven:"Races",points:"Points",powerLimit:"Power Limit"},_=function(e){var t=e.standings;if(!t.length)return r.a.createElement("div",null,"No standings found.");var n=t.sort((function(e,t){return t.points-e.points}));return r.a.createElement("div",null,r.a.createElement("h2",null,t[0].seasonName),r.a.createElement(b,{data:n,headers:C,headerMap:K}))},W=function(e){var t=e.options,n=e.selected,a=e.setSelected;return r.a.createElement("select",{value:n,onChange:function(e){return a(e.target.value)}},t.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.content)})))},G=function(e){var t,n=[],a=Object(M.a)(e);try{var r=function(){var e=t.value;if(n.some((function(t){return e.seasonId===t.value})))return"continue";n.push({value:e.seasonId,content:e.seasonName})};for(a.s();!(t=a.n()).done;)r()}catch(l){a.e(l)}finally{a.f()}return n},J=function(){var e=w(),t=Object(v.a)(e,2),n=t[0].standings,a=t[1],l=0===n.length,c=r.a.useState("0400"),u=Object(v.a)(c,2),i=u[0],o=u[1];if(r.a.useEffect((function(){var e=E+"/standings";l&&function(){var t=Object(f.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,a(S(r)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}()()}),[a,l]),l)return r.a.createElement(j,null);var s=n.filter((function(e){return e.seasonId===i}));return r.a.createElement(k,{title:"Sarjataulukko"},r.a.createElement(W,{options:G(n),selected:i,setSelected:o}),r.a.createElement(_,{standings:s}))},B=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Mik\xe4 on SNW?"),r.a.createElement("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Laudantium ut tenetur, animi ratione voluptatem, illum saepe voluptatum beatae eius earum, excepturi commodi veniam fugiat molestiae. Repudiandae adipisci similique doloremque odio."),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aspernatur, officiis dignissimos. Minima consequuntur perferendis rem deleniti voluptatem deserunt, cum quae et exercitationem vel libero qui, officia quaerat inventore? Laudantium, corrupti?"))},F=function(){return r.a.createElement(k,{title:"Sunday Night Wreckfest"},r.a.createElement(B,null))},Q=["driverName","qTime","group"],X={driverName:"Kuljettaja",qTime:"Aika",group:"Lohko"},z=["driverName","seasonPoints","group","heatPositions","heatPoints"],H={driverName:"Kuljettaja",seasonPoints:"P",group:"L",heatPositions:"L\xe4ht\xf6tulokset",heatPoints:"L\xe4ht\xf6pisteet"},U=function(e){var t=e.data;if(!t)return r.a.createElement("div",null,"The race does not exist.");var n=t.details.sort((function(e,t){return y(e.qTime)-y(t.qTime)})),a=t.details.map((function(e){var t,n;return Object(p.a)(Object(p.a)({},e),{},{heatPoints:null===(t=e.heatPoints)||void 0===t?void 0:t.join(", "),heatPositions:null===(n=e.heatPositions)||void 0===n?void 0:n.join(", ")})})).sort((function(e,t){return t.seasonPoints-e.seasonPoints}));return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"P\xe4iv\xe4"),r.a.createElement("td",null,t.date)),r.a.createElement("tr",null,r.a.createElement("td",null,"Aika-ajokierrokset"),r.a.createElement("td",null,t.qLaps)),r.a.createElement("tr",null,r.a.createElement("td",null,"Kilpailukierrokset"),r.a.createElement("td",null,t.raceLaps)),r.a.createElement("tr",null,r.a.createElement("td",null,"Tehoraja"),r.a.createElement("td",null,t.hasPowerLimit?"X":"")))),r.a.createElement("div",null,r.a.createElement("h2",null,"Aika-ajotulokset"),r.a.createElement(b,{data:n,headers:Q,headerMap:X})),r.a.createElement("div",null,r.a.createElement("h2",null,"Kilpailutulokset"),r.a.createElement(b,{data:a,headers:z,headerMap:H})))},V=function(){var e=Object(i.f)().id,t=w(),n=Object(v.a)(t,2),a=n[0].races,l=n[1],c=!a.some((function(t){return t.eventId===e}));if(r.a.useEffect((function(){var t=E+h(e);c&&function(){var e=Object(f.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,l(L(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()}),[e,l,c]),c)return r.a.createElement(j,null);var u=a.find((function(t){return t.eventId===e}));return r.a.createElement(k,{title:"".concat(null===u||void 0===u?void 0:u.seasonName," | ").concat(null===u||void 0===u?void 0:u.trackName)},r.a.createElement(U,{data:u}))},Y=function(){return r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(D,null)),r.a.createElement(i.a,{path:h(":id")},r.a.createElement(V,null)),r.a.createElement(i.a,{path:"/standings"},r.a.createElement(J,null)),r.a.createElement(i.a,{path:"/snw"},r.a.createElement(F,null)))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,{reducer:function(e,t){switch(t.type){case"SET_CALENDAR":return Object(p.a)(Object(p.a)({},e),{},{calendar:t.payload});case"SET_RACES":return e.races.find((function(e){return e.eventId===t.payload.eventId}))?e:Object(p.a)(Object(p.a)({},e),{},{races:[].concat(Object(N.a)(e.races),[t.payload])});case"SET_STANDINGS":return Object(p.a)(Object(p.a)({},e),{},{standings:t.payload});default:return e}}},r.a.createElement(Y,null))),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.7a385f44.chunk.js.map